print((lambda c: (lambda f: sum(f(f, "?".join([cfg] * 5), tuple(map(int, nums.split(","))) * 5) for cfg, nums in [line.split() for line in open(0)]))(lambda f, cfg, nums: (lambda k: c[k] if k in c else (lambda x: [c.__setitem__(k, x), x][1])(int(sum(nums) == 0) if cfg == "" else int("#" not in cfg) if sum(nums) == 0 else (f(f, cfg[nums[0] + 1:], nums[1:]) if nums[0] <= len(cfg) and "." not in cfg[:nums[0]] and "#" not in cfg[nums[0]:nums[0] + 1] else 0) + (f(f, cfg[1:], nums) if cfg[0] != "#" else 0)))((cfg, nums))))({}))
